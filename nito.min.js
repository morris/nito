/*! Nito v2.0.0-beta - https://github.com/morris/nito */
!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:t(e.$)}(this,function(e){var t=Object.assign||e.extend,n=Array.isArray||e.isArray,a=e.each;return t(e.fn,{update:function(){return this.trigger("update")},nest:function(t,a){var r=e(t).first();if(0===r.length)throw new Error("nest expects a prototype element");if(!n(a))throw new Error("nest expects an item array");return this.each(function(){for(var t=this,n=t.children;a.length<n.length;)t.removeChild(t.lastChild);for(;a.length>n.length;)r.clone(!0).appendTo(t).trigger("mount");a.forEach(function(t,a){e(n[a]).data("item",t).update()})})},nestOne:function(e,t){return this.nest(e,t?[t]:[])},classes:function(t){return this.each(function(){var n=this,r=e(n);a(t,function(e,t){r.toggleClass(e,!!t)})})},fhtml:function(e){return this.each(function(){null===e&&(e=""),this.lastHtml!==e&&(this.innerHTML=this.lastHtml=e)})},ftext:function(e){return this.each(function(){this.lastText!==e&&(this.textContent=this.lastText=e)})},serializeData:function(){var e={};return this.serializeArray().forEach(function(t){for(var n=e,a=parseName(t.name),r=a[0],i=0,s=a.length-1;i<s;++i){var u=a[i];r=a[i+1];var c=""===r||"number"==typeof r?[]:{};n=n[u]=n[u]||c}""===r?n.push(t.value):n[r]=t.value}),e},fill:function(t,n){return this.each(function(){var a=t;e.parseName(this.name||"").forEach(function(e){a&&""!==e&&(a=a[e])}),a===t&&(a=""),e(this).fval(a,n)})},fillDef:function(e){return this.fill(e,!0)},fval:function(t,a){var r="value",i="selected",s="checked";return a&&(r="defaultValue",i="defaultSelected",s="defaultChecked"),t=e.toValue(t),this.each(function(){var u=this,c=u.tagName;switch("INPUT"===c?u.type:c){case"SELECT":var l=u.multiple&&n(t);e(u).children().each(function(){var e=this.getAttribute("value")||this.textContent;this[i]=l?t.indexOf(e)>=0:t===e});break;case"TEXTAREA":u[r]!==t&&(u[r]=t),a&&e(u).ftext(t);break;case"radio":case"checkbox":var h=u.getAttribute("value")||"on";u[s]=n(t)?t.indexOf(h)>=0:t===h;break;case"OPTION":case"button":case"file":case"image":case"reset":case"submit":break;default:u[r]!==t&&(u[r]=t)}})},fdef:function(e){return this.fval(e,!0)},reset:function(){return this.each(function(){switch(this.tagName){case"FORM":this.reset();break;case"INPUT":"checkbox"===this.type||"radio"===this.type?this.checked=this.defaultChecked:this.value=this.defaultValue;break;case"TEXTAREA":this.value=this.defaultValue;break;case"OPTION":this.selected=this.defaultSelected;break;case"SELECT":e(this).children().reset()}})},outerHtml:function(){return e("<div></div>").append(this).html()}}),t(e,{parseUrl:function(t){return e("<a></a>").attr("href",t)[0]},parseQuery:function(e){return(e||"").replace(/^[?#]/,"").split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]||"").replace(/\+/g," "),e},{})},parseName:function(e){return e.replace(/\]/g,"").split(/\[/g).map(function(e){return e.match(/^\d+$/)?parseInt(e,10):e})},toValue:function(e){return null===e||void 0===e||!1===e?"":!0===e?"on":n(e)?e.map(toValue):e+""}}),e.event.special.update=t({},e.event.special.update,{noBubble:!0}),e});