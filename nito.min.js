/*! Nito v2.0.0-beta - https://github.com/morris/nito */
!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:t(e,e.$,!0)}(this,function(e,t,n){if(t.update)return t;var a=Object.assign||t.extend,u=Array.isArray||t.isArray;return a(t.fn,{mount:function(e,t){if("string"!=typeof e||"function"!=typeof t)throw new Error("mount expects a selector string and a function");return this.addClass("mount-scope").each(function(){this.mounts=this.mounts||[],this.mounts.push({selector:e,fn:t})})},update:function(){return this.each(function(){-1===t.updateQueue.indexOf(this)&&t.updateQueue.push(this)})},dispatch:function(e,n){return t.eventQueue.push({$target:this,type:e,data:n}),this},nest:function(e,n){if(!u(e))throw new Error("nest expects an item array");return this.each(function(){for(var a=this,u=a.children,r=a.nestElement=n&&t(n)[0]||a.nestElement||u[0];e.length<u.length;)a.removeChild(a.lastChild);for(;e.length>u.length;)a.appendChild(r.cloneNode(!0));e.forEach(function(e,n){t(u[n]).data("item",e).update()})})},nestOne:function(e,t){return this.nest(e?[e]:[],t)},classes:function(e){return this.each(function(){var n=t(this);t.each(e,function(e,t){n.toggleClass(e,!!t)})})},fhtml:function(e){return this.each(function(){null===e&&(e=""),this.lastHtml!==e&&(this.innerHTML=this.lastHtml=e)})},ftext:function(e){return this.each(function(){this.lastText!==e&&(this.textContent=this.lastText=e)})},serializeData:function(){var e={};return this.serializeArray().forEach(function(n){for(var a=e,u=t.parseName(n.name),r=u[0],i=0,s=u.length-1;i<s;++i){var c=u[i],o=""===(r=u[i+1])||"number"==typeof r?[]:{};a=a[c]=a[c]||o}""===r?a.push(n.value):a[r]=n.value}),e},fill:function(e,n){return this.each(function(){var a=e;t.parseName(this.name||"").forEach(function(e){a&&""!==e&&(a=a[e])}),t(this).fval(a===e?"":a,n)})},fillDef:function(e){return this.fill(e,!0)},fval:function(e,n){var a="value",r="selected",i="checked";return n&&(a="defaultValue",r="defaultSelected",i="defaultChecked"),e=t.toValue(e),this.each(function(){var s=this,c=s.tagName;switch("INPUT"===c?s.type:c){case"SELECT":var o=s.multiple&&u(e);t(s).children().each(function(){var t=this.getAttribute("value")||this.textContent;this[r]=o?e.indexOf(t)>=0:e===t});break;case"TEXTAREA":s[a]!==e&&(s[a]=e),n&&t(s).ftext(e);break;case"radio":case"checkbox":var h=s.getAttribute("value")||"on";s[i]=u(e)?e.indexOf(h)>=0:e===h;break;case"OPTION":case"button":case"file":case"image":case"reset":case"submit":break;default:s[a]!==e&&(s[a]=e)}})},fdef:function(e){return this.fval(e,!0)},reset:function(){return this.each(function(){switch(this.tagName){case"FORM":this.reset();break;case"INPUT":"checkbox"===this.type||"radio"===this.type?this.checked=this.defaultChecked:this.value=this.defaultValue;break;case"TEXTAREA":this.value=this.defaultValue;break;case"OPTION":this.selected=this.defaultSelected;break;case"SELECT":t(this).children().reset()}})}}),a(t,{parseUrl:function(e){return t("<a></a>").attr("href",e)[0]},parseQuery:function(e){return(e||"").replace(/^[?#]/,"").split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]||"").replace(/\+/g," "),e},{})},parseName:function(e){return e.replace(/\]/g,"").split(/\[/g).map(function(e){return e.match(/^\d+$/)?parseInt(e,10):e})},toValue:function(e){return null===e||void 0===e||!1===e?"":!0===e?"on":u(e)?e.map(t.toValue):e+""},nextFrame:(e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)}).bind(e),update:function(){t.autoUpdate&&t.nextFrame(t.update);var e,n,a;for(e=0,n=t.mountScopes.length;e<n;++e)for(var u=t.mountScopes[e],r=u.mounts||[],i=0,s=r.length;i<s;++i)for(var c=r[i],o=t(c.selector,u),h=c.fn,l=0,f=o.length;l<f;++l){var d=o[l],p=d.mounted=d.mounted||[];if(-1===p.indexOf(h))try{p.push(h),h.call(d,t(d).update())}catch(e){console.warn(e.stack)}}for(a=t.eventQueue,t.eventQueue=[],e=0,n=a.length;e<n;++e){var m=a[e];try{m.$target.trigger(m.type,m.data)}catch(e){console.warn(e.stack)}}for(a=t.updateQueue,t.updateQueue=[],e=0,n=a.length;e<n;++e)try{t(a[e]).trigger("update")}catch(e){console.warn(e.stack)}},mountScopes:e.document.getElementsByClassName("mount-scope"),updateQueue:[],eventQueue:[],autoUpdate:n}),t.event.special.update=a(t.event.special.update||{},{noBubble:!0}),n&&t.update(),t});