/*! Nito v2.0.0-beta - https://github.com/morris/nito */
!function(e,t){"function"==typeof define&&define.amd?define([],function(){return t}):"object"==typeof module&&module.exports?module.exports=t:t(e)}(this,function(e){function t(){n.updateId=n.nextFrame(t),n.update()}var n=e.$,a=e.document,r=Object.assign||n.extend,u=Array.isArray||n.isArray;return r(n.fn,{mount:function(e,t,n){return this.addClass("mount-root").each(function(){(this.mounts=this.mounts||[]).push({selector:e,fn:t})})},update:function(){return this.each(function(){-1===n.updateQueue.indexOf(this)&&n.updateQueue.push(this)})},nest:function(e,t){if(!u(e))throw new Error("nest expects an item array");return this.each(function(){for(var a=this,r=a.children,u=a.nestElement=t&&n(t)[0]||a.nestElement||r[0];e.length<r.length;)a.removeChild(a.lastChild);for(;e.length>r.length;)a.appendChild(u.cloneNode(!0));e.forEach(function(e,t){n(r[t]).data("item",e).update()})})},nestOne:function(e,t){return this.nest(e?[e]:[],t)},classes:function(e){return this.each(function(){var t=this,a=n(t);n.each(e,function(e,t){a.toggleClass(e,!!t)})})},fhtml:function(e){return this.each(function(){null===e&&(e=""),this.lastHtml!==e&&(this.innerHTML=this.lastHtml=e)})},ftext:function(e){return this.each(function(){this.lastText!==e&&(this.textContent=this.lastText=e)})},serializeData:function(){var e={};return this.serializeArray().forEach(function(t){for(var n=e,a=parseName(t.name),r=a[0],u=0,i=a.length-1;u<i;++u){var s=a[u];r=a[u+1];var o=""===r||"number"==typeof r?[]:{};n=n[s]=n[s]||o}""===r?n.push(t.value):n[r]=t.value}),e},fill:function(e,t){return this.each(function(){var a=e;n.parseName(this.name||"").forEach(function(e){a&&""!==e&&(a=a[e])}),a===e&&(a=""),n(this).fval(a,t)})},fillDef:function(e){return this.fill(e,!0)},fval:function(e,t){var a="value",r="selected",i="checked";return t&&(a="defaultValue",r="defaultSelected",i="defaultChecked"),e=n.toValue(e),this.each(function(){var s=this,o=s.tagName;switch("INPUT"===o?s.type:o){case"SELECT":var c=s.multiple&&u(e);n(s).children().each(function(){var t=this.getAttribute("value")||this.textContent;this[r]=c?e.indexOf(t)>=0:e===t});break;case"TEXTAREA":s[a]!==e&&(s[a]=e),t&&n(s).ftext(e);break;case"radio":case"checkbox":var h=s.getAttribute("value")||"on";s[i]=u(e)?e.indexOf(h)>=0:e===h;break;case"OPTION":case"button":case"file":case"image":case"reset":case"submit":break;default:s[a]!==e&&(s[a]=e)}})},fdef:function(e){return this.fval(e,!0)},reset:function(){return this.each(function(){switch(this.tagName){case"FORM":this.reset();break;case"INPUT":"checkbox"===this.type||"radio"===this.type?this.checked=this.defaultChecked:this.value=this.defaultValue;break;case"TEXTAREA":this.value=this.defaultValue;break;case"OPTION":this.selected=this.defaultSelected;break;case"SELECT":n(this).children().reset()}})},dispatch:function(e,t){return n.eventQueue.push({$target:this,type:e,data:t}),this},outerHtml:function(){return n("<div></div>").append(this).html()}}),r(n,{parseUrl:function(e){return n("<a></a>").attr("href",e)[0]},parseQuery:function(e){return(e||"").replace(/^[?#]/,"").split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=decodeURIComponent(n[1]||"").replace(/\+/g," "),e},{})},parseName:function(e){return e.replace(/\]/g,"").split(/\[/g).map(function(e){return e.match(/^\d+$/)?parseInt(e,10):e})},toValue:function(e){return null===e||void 0===e||!1===e?"":!0===e?"on":u(e)?e.map(toValue):e+""},nextFrame:(e.requestAnimationFrame||e.webkitRequestAnimationFrame||e.mozRequestAnimationFrame||e.msRequestAnimationFrame||e.setImmediate||function(e){return setTimeout(e,0)}).bind(e),mountRoots:a.getElementsByClassName("mount-root"),updateQueue:[],eventQueue:[],update:function(){var e,t,a;for(e=0,t=n.mountRoots.length;e<t;++e)for(var r=n.mountRoots[e],u=r.mounts||[],i=0,s=u.length;i<s;++i)for(var o=u[i],c=n(o.selector,r),h=o.fn,l=0,f=c.length;l<f;++l){var d=c[l],m=d.mounted=d.mounted||[];if(-1===m.indexOf(h))try{m.push(h),h.call(d,n(d).update())}catch(e){console.warn(e.stack)}}for(a=n.eventQueue,n.eventQueue=[],e=0,t=a.length;e<t;++e){var p=a[e];try{p.$target.trigger(p.type,p.data)}catch(e){console.warn(e.stack)}}for(a=n.updateQueue,n.updateQueue=[],e=0,t=a.length;e<t;++e)try{n(a[e]).trigger("update")}catch(e){console.warn(e.stack)}}}),n.event.special.update=r({},n.event.special.update,{noBubble:!0}),t(),n});